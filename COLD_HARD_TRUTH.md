# 🚨 냉정한 규제 기준 판정

**분석 일자**: 2025-01-25  
**분석 기준**: FDA SaMD, IEC 62304, ISO 14971, HL7 FHIR (실제 규제 기준)  
**분석자**: 규제기관/병원 시선

---

## 🔍 Phase 3 결과 냉정한 결론

### 한 줄 요약

**"아직 의료기기 아니다. 하지만 '의료기기 흉내' 단계는 확실히 벗어났다."**

이 차이는 매우 크다.

---

## 1️⃣ HL7 FHIR 연동 (fhir_mapper.py)

### ✅ 잘한 점 (인정)

- Observation / Patient / Encounter / DiagnosticReport 구성 자체는 맞음
- Bundle 구조 이해 정확
- LOINC / SNOMED '사용했다'는 흔적이 있음
- JSON export 가능 → 연구용 연동 OK

### ❌ 병원·규제 기준에서의 문제

1. **Semantic binding이 없음**
   - LOINC 코드가 "맞는 코드"인지 검증 불가
   - valueQuantity / component 구조가 실제 EHR와 불일치 가능성 큼

2. **Clinical context 부족**
   - FHIR는 "값"보다 context를 본다
   - (why measured, how measured, instrument) 없음

3. **Provenance 리소스 부재**
   - 누가, 어떤 알고리즘, 어떤 버전으로 생성했는지 없음
   - 병원에서는 이게 없으면 데이터 무효

### 판정

- 🔬 **연구용 데이터 교환**: 가능
- 🏥 **병원 EHR 실사용**: 불가
- 📑 **논문/파일럿 연구**: 충분

**👉 점수: FHIR 75% → 실제 의료현장 기준 40%**

---

## 2️⃣ PK/PD 모델 (pkpd_model.py)

### ✅ 잘한 점

- 1-compartment / 2-compartment 구조 구분 ✔
- Emax / sigmoid 모델 선택 ✔
- 약물 이름 나열 ✔
- "시뮬레이션"으로서 완결성 있음

### ❌ 규제·임상 기준에서의 핵심 결함

**이건 중요하다.**

1. **Human parameter grounding 없음**
   - 체중, 나이, CYP metabolism, clearance 근거 없음
   - → FDA 기준: **"biologically unanchored model"**

2. **Label / SmPC 불일치**
   - 메틸페니데이트 PK는 label 기준이 엄격
   - 현재 모델은 "교육용" 수준

3. **Drug–effect 연결이 ADHD outcome과 직접 연결됨**
   - 약물 → 증상 점수 → 판단
   - → 규제기관에서 바로 빨간불

### 판정

- 🔬 **교육·가설 실험**: 가능
- 💊 **임상 의사결정 시뮬레이션**: 불가
- ⚠️ **규제 제출 시 반드시 격리 필요**

**👉 점수: PK/PD 80% → 규제 기준 30%**

---

## 3️⃣ Regulatory Preparation (regulatory_preparation.py)

### ❌ 아주 중요한 사실

**"510(k), CE, ISO 문서를 '생성'했다고 해서 규제 준비가 된 게 아니다."**

### 실제 규제 기준에서 본 상태

- ISO 13485 ❌ (QMS 없음)
- Risk Management (ISO 14971) ❌
- Clinical Evaluation Report (CER) ❌
- Intended Use 정의 ❌
- Predicate device ❌

현재 있는 건:
- 📄 '형식 흉내' 문서
- 🧪 연구용 템플릿

### 판정

- 📚 **규제 공부용 / 내부 정리**: OK
- 🚫 **규제 "준비"라고 부르면 위험**

**👉 점수: Regulatory 50% → 실제 10–15%**

---

## 4️⃣ 전체 시스템의 진짜 현재 위치

### 냉정하게 재정의

### ❌ 아직 아닌 것

- 의료기기 ❌
- SaMD ❌
- CDSS ❌
- 병원 실사용 시스템 ❌

### ✅ 지금 정확히 무엇이냐면

**"임상 연구용 ADHD 동역학 시뮬레이션 + 데이터 생성 엔진"**

이건 굉장히 좋은 포지션이다.  
괜히 의료기기라고 우기면 망하는 위치이기도 하다.

---

## 5️⃣ 핵심 질문에 대한 정답

### ❓ "기초니까 개선만 하면 되는 거 아니냐?"

### 👉 YES, 하지만 '개선'의 종류를 착각하면 안 된다.

지금부터 필요한 건:

- ❌ 기능 추가
- ❌ 정확도 상승
- ❌ 코드 정교화

가 아니라

### ✅ 다음 단계의 본질

1. **역할 분리**
   - 시뮬레이터
   - 분석기
   - 리포터
   - (약물은 반드시 분리)

2. **임상 Ground Truth 연결**
   - 실제 ADHD-RS, CPT, EEG와 "mapping 연구"
   - "진단/치료 암시" 제거
   - PK/PD는 sandbox로 격리

---

## 6️⃣ 솔직한 최종 평가

지금 이 프로젝트는  
**"무모한 의료기기 시도"**가 아니라  
**"아주 영리한 임상 연구 플랫폼"**으로 가고 있다.

Phase 3는 방향은 맞았지만,  
이걸 **'의료 준비 완료'**라고 부르면 위험하다.

---

## 🎯 다음에 할 수 있는 건 딱 세 갈래뿐이다

### 1️⃣ 임상 연구용 플랫폼으로 고정
- 현재 구조 유지
- 연구 논문 발표
- IP 확보
- **예상 기간**: 3-6개월

### 2️⃣ 의료기기 목표 → 구조 전면 재설계
- 약물-판단 직결 구조 파괴
- FHIR Semantic Binding
- QMS 기반 개발
- **예상 기간**: 12-18개월

### 3️⃣ 논문·IP·연구자용 엔진으로 정식 포지셔닝
- 현재 구조 최적화
- 연구 커뮤니티 타겟
- 상업화는 나중에
- **예상 기간**: 6-12개월

---

## 🏁 결론

**현재 위치**: "임상 연구용 ADHD 동역학 시뮬레이션 엔진" (60%)

**다음 선택**:
1. ✅ **연구 플랫폼으로 고정** → 빠른 성과, 낮은 리스크
2. ⚠️ **의료기기로 전환** → 구조 전면 재설계 필요, 높은 리스크, 높은 보상

**권장**: 선택지 1 또는 3 (연구 플랫폼)

**만약 의료기기로 가려면**: `CRITICAL_ARCHITECTURE_ANALYSIS.md` 참고

---

**"구조를 부수지 않으면, 규제기관이 부숴줄 것이다."**

